{"ast":null,"code":"import _objectSpread from\"/Users/maccheesebook/Documents/SlyTech/notes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/maccheesebook/Documents/SlyTech/notes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/maccheesebook/Documents/SlyTech/notes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/maccheesebook/Documents/SlyTech/notes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useParams}from'react-router-dom';import{ReactComponent as ArrowLeft}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/arrow-left.svg\";// import notes from '../assets/data'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(){var params=useParams();var noteId=params.noteId;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[noteId]);// let note = notes.find(note => note.id === noteId)\nvar getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"http://127.0.0.1:5000/notes/\".concat(noteId));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('http://127.0.0.1:5000/notes/',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(_objectSpread(_objectSpread({},note),{},{'updated':new Date()}))});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function createNote(){return _ref2.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://127.0.0.1:5000/notes/\".concat(noteId),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(_objectSpread(_objectSpread({},note),{},{'updated':new Date()}))});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function updateNote(){return _ref3.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"http://127.0.0.1:5000/notes/\".concat(noteId),{method:'DELETE',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteId!=='new'&&!note.body){deleteNote();}else if(noteId!=='new'){updateNote();}else if(noteId==='new'&&note!==null){createNote();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})})}),noteId!=='new'?/*#__PURE__*/_jsx(Link,{to:\"/\",onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(Link,{to:\"/\",onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){setNote(_objectSpread(_objectSpread({},note),{},{'body':e.target.value}));},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"sources":["/Users/maccheesebook/Documents/SlyTech/notes/src/pages/NotePage.js"],"names":["React","useState","useEffect","Link","useParams","NotePage","params","noteId","note","setNote","getNote","fetch","response","json","data","createNote","method","headers","body","JSON","stringify","Date","updateNote","deleteNote","handleSubmit","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link, useParams } from 'react-router-dom'\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\n// import notes from '../assets/data'\n\nconst NotePage = () => {\n    let params = useParams()\n    let noteId = params.noteId\n\n    let [note, setNote] = useState(null)\n\n    useEffect(() => {\n        getNote()\n    }, [noteId])\n    // let note = notes.find(note => note.id === noteId)\n\n    let getNote = async () => {\n        if (noteId === 'new') return\n\n        let response = await fetch(`http://127.0.0.1:5000/notes/${noteId}`)\n        let data = await response.json()\n        setNote(data)\n    }\n\n    let createNote = async () => {\n        await fetch('http://127.0.0.1:5000/notes/', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ ...note, 'updated': new Date() })\n        })\n    }\n\n    let updateNote = async () => {\n        await fetch(`http://127.0.0.1:5000/notes/${noteId}`, {\n            method: 'PUT',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ ...note, 'updated': new Date() })\n        })\n    }\n\n    let deleteNote = async () => {\n        await fetch(`http://127.0.0.1:5000/notes/${noteId}`, {\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(note)\n        })\n    }\n\n    let handleSubmit = () => {\n        if (noteId !== 'new' && !note.body) {\n            deleteNote()\n        } else if (noteId !== 'new') {\n            updateNote()\n        } else if (noteId === 'new' && note !== null) {\n            createNote()\n        }\n    }\n\n    return (\n        <div className='note'>\n\n            <div className='note-header'>\n                <h3>\n                    <Link to='/'>\n                        <ArrowLeft onClick={handleSubmit} />\n                    </Link>\n                </h3>\n                {noteId !== 'new' ? (\n                    <Link to='/' onClick={deleteNote}>Delete</Link>\n                ) : (\n                    <Link to='/' onClick={handleSubmit}>Done</Link>\n                )}\n            </div>\n            <textarea onChange={(e) => { setNote({ ...note, 'body': e.target.value }) }} value={note?.body}></textarea>\n        </div>\n    )\n}\n\nexport default NotePage\n"]},"metadata":{},"sourceType":"module"}